{"remainingRequest":"D:\\Практика\\Vue practice\\vue-pannellum-interface\\node_modules\\babel-loader\\lib\\index.js!D:\\Практика\\Vue practice\\vue-pannellum-interface\\node_modules\\eslint-loader\\index.js??ref--13-0!D:\\Практика\\Vue practice\\vue-pannellum-interface\\src\\controller.js","dependencies":[{"path":"D:\\Практика\\Vue practice\\vue-pannellum-interface\\src\\controller.js","mtime":1607678368807},{"path":"D:\\Практика\\Vue practice\\vue-pannellum-interface\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\Практика\\Vue practice\\vue-pannellum-interface\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"D:\\Практика\\Vue practice\\vue-pannellum-interface\\node_modules\\eslint-loader\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZm9yLWVhY2giOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5pbmRleC1vZiI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL3dlYi5kb20tY29sbGVjdGlvbnMuZm9yLWVhY2giOwppbXBvcnQgX2NsYXNzQ2FsbENoZWNrIGZyb20gIkQ6L1x1MDQxRlx1MDQ0MFx1MDQzMFx1MDQzQVx1MDQ0Mlx1MDQzOFx1MDQzQVx1MDQzMC9WdWUgcHJhY3RpY2UvdnVlLXBhbm5lbGx1bS1pbnRlcmZhY2Uvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2NsYXNzQ2FsbENoZWNrIjsKaW1wb3J0IF9jcmVhdGVDbGFzcyBmcm9tICJEOi9cdTA0MUZcdTA0NDBcdTA0MzBcdTA0M0FcdTA0NDJcdTA0MzhcdTA0M0FcdTA0MzAvVnVlIHByYWN0aWNlL3Z1ZS1wYW5uZWxsdW0taW50ZXJmYWNlL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9jcmVhdGVDbGFzcyI7CmltcG9ydCBwYW5uZWxsdW0gZnJvbSAnQC9wYW5uZWxsdW0tMi41LjYvc3JjL2pzL3Bhbm5lbGx1bS5qcyc7Cgp2YXIgQ29udHJvbGxlciA9IC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoKSB7CiAgZnVuY3Rpb24gQ29udHJvbGxlcih2aWV3ZXJDb250YWluZXJJZCkgewogICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIENvbnRyb2xsZXIpOwoKICAgIHRoaXMuYWRkUGFubmVsbHVtVmlld2VyKHZpZXdlckNvbnRhaW5lcklkKTsKICB9CgogIF9jcmVhdGVDbGFzcyhDb250cm9sbGVyLCBbewogICAga2V5OiAiYWRkUGFubmVsbHVtVmlld2VyIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBhZGRQYW5uZWxsdW1WaWV3ZXIodmlld2VyQ29udGFpbmVySWQpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKCiAgICAgIHRoaXMudmlld2VyID0gcGFubmVsbHVtLnZpZXdlcih2aWV3ZXJDb250YWluZXJJZCwgewogICAgICAgICdkZWZhdWx0JzogewogICAgICAgICAgJ3R5cGUnOiAnZXF1aXJlY3Rhbmd1bGFyJywKICAgICAgICAgICdhdXRvTG9hZCc6IHRydWUsCiAgICAgICAgICAnYXV0aG9yJzogJ0Frb3B5YW4gQWxla3NhbmRyJywKICAgICAgICAgICd0aXRsZSc6ICdDdXN0b21pemFibGUgcGFubmVsbHVtIHZpZXdlcicsCiAgICAgICAgICAnaG90U3BvdHMnOiBbXQogICAgICAgIH0sCiAgICAgICAgJ3NjZW5lcyc6IHt9CiAgICAgIH0pOwogICAgICB0aGlzLnZpZXdlci5vbignbG9hZCcsIGZ1bmN0aW9uICgpIHsKICAgICAgICBfdGhpcy5sb2FkU3BvdHNUb1NjZW5lKCk7CgogICAgICAgIF90aGlzLmFwcGx5VHJhbnNpdGlvbkNsaWNrcygpOwogICAgICB9KTsKICAgICAgdGhpcy5jcmVhdGVIb21lQnV0dHRvbigpOwogICAgICB0aGlzLmhvbWVTY2VuZTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJjcmVhdGVIb21lQnV0dHRvbiIsCiAgICB2YWx1ZTogZnVuY3Rpb24gY3JlYXRlSG9tZUJ1dHR0b24oKSB7CiAgICAgIHZhciBfdGhpczIgPSB0aGlzOwoKICAgICAgdmFyIGJ1dHRvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2lucHV0Jyk7CiAgICAgIGJ1dHRvbi50eXBlID0gJ2J1dHRvbic7CiAgICAgIGJ1dHRvbi5pZCA9ICdob21lQnV0dG9uJzsKICAgICAgYnV0dG9uLnZhbHVlID0gJ0hvbWUnOwogICAgICBidXR0b24uc3R5bGUuZGlzcGxheSA9ICdub25lJzsKCiAgICAgIGJ1dHRvbi5vbmNsaWNrID0gZnVuY3Rpb24gKCkgewogICAgICAgIF90aGlzMi52aWV3ZXIubG9hZFNjZW5lKHZpZXdlckNvbnRyb2xsZXIuaG9tZVNjZW5lKTsKCiAgICAgICAgYnV0dG9uLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7CiAgICAgIH07CgogICAgICBidXR0b24uc3R5bGUucG9zaXRpb24gPSAnYWJzb2x1dGUnOwogICAgICBidXR0b24uc3R5bGUudG9wID0gJzRweCc7CiAgICAgIGJ1dHRvbi5zdHlsZS5yaWdodCA9ICc0cHgnOwogICAgICBkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKCdwbmxtLXVpJylbMF0uYXBwZW5kQ2hpbGQoYnV0dG9uKTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJnZXRDZW50ZXJQb3NpdGlvbiIsCiAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0Q2VudGVyUG9zaXRpb24oKSB7CiAgICAgIHJldHVybiB7CiAgICAgICAgcGl0Y2g6IHRoaXMudmlld2VyLmdldFBpdGNoKCksCiAgICAgICAgeWF3OiB0aGlzLnZpZXdlci5nZXRQaXRjaCgpCiAgICAgIH07CiAgICB9CiAgfSwgewogICAga2V5OiAiYWRkU2NlbmUiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGFkZFNjZW5lKHBhbm9yYW1hUGF0aCkgewogICAgICB2YXIgc2NlbmUgPSB7CiAgICAgICAgJ3Bhbm9yYW1hJzogcGFub3JhbWFQYXRoCiAgICAgIH07CiAgICAgIHRoaXMudmlld2VyLmFkZFNjZW5lKHBhbm9yYW1hUGF0aCwgc2NlbmUpOwogICAgfQogIH0sIHsKICAgIGtleTogImxvYWRQYW5vcmFtYSIsCiAgICB2YWx1ZTogZnVuY3Rpb24gbG9hZFBhbm9yYW1hKHBhbm9yYW1hUGF0aCkgewogICAgICBpZiAoIShwYW5vcmFtYVBhdGggaW4gdGhpcy52aWV3ZXIuZ2V0Q29uZmlnKClbJ3NjZW5lcyddKSkgdGhpcy5hZGRTY2VuZShwYW5vcmFtYVBhdGgpOwogICAgICB0aGlzLnZpZXdlci5sb2FkU2NlbmUocGFub3JhbWFQYXRoKTsKICAgICAgdGhpcy5jdXJyZW50U2NlbmVQYXRoID0gcGFub3JhbWFQYXRoOwogICAgfQogIH0sIHsKICAgIGtleTogImdldEhvdFNwb3RJbmZvIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBnZXRIb3RTcG90SW5mbyhpbmRleCkgewogICAgICB2YXIgaG90U3BvdHMgPSB0aGlzLnZpZXdlci5nZXRDb25maWcoKVsnaG90U3BvdHMnXTsKICAgICAgdGhpcy5jdXJyZW50U3BvdCA9IGhvdFNwb3RzW2luZGV4XTsKICAgICAgcmV0dXJuIHRoaXMuY3VycmVudFNwb3Q7CiAgICB9CiAgfSwgewogICAga2V5OiAiZGlzcGxheUNyb3NzIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBkaXNwbGF5Q3Jvc3MoaXNFZGl0aW5nKSB7CiAgICAgIHZhciBob3RTcG90RGVidWdJY29uID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSgncG5sbS1zcHJpdGUgcG5sbS1ob3Qtc3BvdC1kZWJ1Zy1pbmRpY2F0b3InKVswXTsKCiAgICAgIGlmIChpc0VkaXRpbmcpIHsKICAgICAgICBob3RTcG90RGVidWdJY29uLnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snOwogICAgICB9IGVsc2UgewogICAgICAgIGhvdFNwb3REZWJ1Z0ljb24uc3R5bGUuZGlzcGxheSA9ICdub25lJzsKICAgICAgfQogICAgfQogIH0sIHsKICAgIGtleTogImFkZEhvdFNwb3QiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGFkZEhvdFNwb3Qoc3BvdFR5cGUsIHBpdGNoLCB5YXcsIHRleHQpIHsKICAgICAgdmFyIHNwb3RJZCA9IGFyZ3VtZW50cy5sZW5ndGggPiA0ICYmIGFyZ3VtZW50c1s0XSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzRdIDogLTE7CiAgICAgIHZhciB0cmFuc2l0aW9uU2NlbmUgPSBhcmd1bWVudHMubGVuZ3RoID4gNSA/IGFyZ3VtZW50c1s1XSA6IHVuZGVmaW5lZDsKICAgICAgdmFyIGlkID0gc3BvdElkICE9IC0xID8gc3BvdElkIDogdGhpcy52aWV3ZXIuZ2V0Q29uZmlnKClbImhvdFNwb3RzIl0ubGVuZ3RoOwogICAgICBzcG90VHlwZSA9PSAnaW5mbycgPyB0aGlzLmFkZEluZm9TcG90KHBpdGNoLCB5YXcsIHRleHQsIGlkKSA6IHRoaXMuYWRkVHJhbnNpdFNwb3QocGl0Y2gsIHlhdywgdGV4dCwgaWQsIHRyYW5zaXRpb25TY2VuZSk7CiAgICAgIHRoaXMuYXBwbHlUcmFuc2l0aW9uQ2xpY2tzKCk7CiAgICB9CiAgfSwgewogICAga2V5OiAiYWRkSW5mb1Nwb3QiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGFkZEluZm9TcG90KHBpdGNoLCB5YXcsIHRleHQsIGlkKSB7CiAgICAgIHZhciBfdGhpczMgPSB0aGlzOwoKICAgICAgdGhpcy52aWV3ZXIuYWRkSG90U3BvdCh7CiAgICAgICAgJ3BpdGNoJzogcGl0Y2gsCiAgICAgICAgJ3lhdyc6IHlhdywKICAgICAgICAndHlwZSc6ICdpbmZvJywKICAgICAgICAndGV4dCc6IHRleHQsCiAgICAgICAgJ2lkJzogaWQsCiAgICAgICAgJ2NsaWNrSGFuZGxlckZ1bmMnOiBmdW5jdGlvbiBjbGlja0hhbmRsZXJGdW5jKCkgewogICAgICAgICAgY29uc29sZS5sb2coX3RoaXMzKTsKICAgICAgICAgIENvbnRyb2xsZXIuaW5mb1Nwb3RDbGljayhfdGhpczMpOwogICAgICAgIH0KICAgICAgfSwgdGhpcy5jdXJyZW50U2NlbmVQYXRoKTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJhZGRUcmFuc2l0U3BvdCIsCiAgICB2YWx1ZTogZnVuY3Rpb24gYWRkVHJhbnNpdFNwb3QocGl0Y2gsIHlhdywgdGV4dCwgaWQsIHRyYW5zaXRpb25TY2VuZSkgewogICAgICB0aGlzLnZpZXdlci5hZGRIb3RTcG90KHsKICAgICAgICAncGl0Y2gnOiBwaXRjaCwKICAgICAgICAneWF3JzogeWF3LAogICAgICAgICd0eXBlJzogJ3NjZW5lJywKICAgICAgICAndGV4dCc6IHRleHQsCiAgICAgICAgJ2lkJzogaWQsCiAgICAgICAgJ3NjZW5lSWQnOiB0cmFuc2l0aW9uU2NlbmUKICAgICAgfSk7CiAgICB9CiAgfSwgewogICAga2V5OiAidHJhbnNpdFNwb3RDbGljayIsCiAgICB2YWx1ZTogZnVuY3Rpb24gdHJhbnNpdFNwb3RDbGljayhzcG90KSB7CiAgICAgIGlmICh0aGlzLmVkaXRpbmdNb2RlKSB7CiAgICAgICAgdGhpcy5nZXRIb3RTcG90SW5mbyhzcG90LmlkKTsKICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLmN1cnJlbnRTY2VuZVBhdGggPSBzcG90LnNjZW5lSWQ7CiAgICAgICAgdmFyIGhvbWVCdXR0b24gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnaG9tZUJ1dHRvbicpOwogICAgICAgIGhvbWVCdXR0b24uc3R5bGUuZGlzcGxheSA9IHRoaXMuY3VycmVudFNjZW5lUGF0aCA9PSB0aGlzLmhvbWVTY2VuZSA/ICdub25lJyA6ICdibG9jayc7CiAgICAgICAgdGhpcy5sb2FkUGFub3JhbWEoc3BvdC5zY2VuZUlkKTsKICAgICAgfQogICAgfQogIH0sIHsKICAgIGtleTogImFwcGx5VHJhbnNpdGlvbkNsaWNrcyIsCiAgICB2YWx1ZTogZnVuY3Rpb24gYXBwbHlUcmFuc2l0aW9uQ2xpY2tzKCkgewogICAgICB2YXIgX3RoaXM0ID0gdGhpczsKCiAgICAgIHRoaXMudmlld2VyLmdldENvbmZpZygpLmhvdFNwb3RzLmZvckVhY2goZnVuY3Rpb24gKHNwb3QpIHsKICAgICAgICBpZiAoc3BvdC50eXBlID09ICdzY2VuZScpIHsKICAgICAgICAgIHNwb3QuZGl2Lm9uY2xpY2sgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIF90aGlzNC50cmFuc2l0U3BvdENsaWNrKHNwb3QpOwogICAgICAgICAgfTsKICAgICAgICB9CiAgICAgIH0pOwogICAgfQogIH0sIHsKICAgIGtleTogIm1vdmVIb3RTcG90IiwKICAgIHZhbHVlOiBmdW5jdGlvbiBtb3ZlSG90U3BvdChwaXRjaCwgeWF3LCB0ZXh0KSB7CiAgICAgIHZhciBzcG90ID0gdGhpcy5jdXJyZW50U3BvdDsKICAgICAgdGhpcy5yZW1vdmVIb3RTcG90KCk7CiAgICAgIHRoaXMuYWRkSG90U3BvdChzcG90LnR5cGUsIHBpdGNoLCB5YXcsIHRleHQsIHNwb3QuaWQsIHNwb3Quc2NlbmVJRCk7CiAgICAgIHRoaXMuY3VycmVudFNwb3QgPSB1bmRlZmluZWQ7CiAgICAgIHRoaXMuYXBwbHlUcmFuc2l0aW9uQ2xpY2tzKCk7CiAgICB9CiAgfSwgewogICAga2V5OiAicmVtb3ZlSG90U3BvdCIsCiAgICB2YWx1ZTogZnVuY3Rpb24gcmVtb3ZlSG90U3BvdCgpIHsKICAgICAgdmFyIHNwb3RzID0gdGhpcy52aWV3ZXIuZ2V0Q29uZmlnKClbImhvdFNwb3RzIl07CiAgICAgIHZhciBpbmRleCA9IHNwb3RzLmluZGV4T2YodGhpcy5jdXJyZW50U3BvdCk7CgogICAgICBpZiAoaW5kZXggPiAtMSkgewogICAgICAgIHRoaXMudmlld2VyLnJlbW92ZUhvdFNwb3QodGhpcy5jdXJyZW50U3BvdC5pZCk7CiAgICAgIH0KCiAgICAgIHRoaXMuYXBwbHlUcmFuc2l0aW9uQ2xpY2tzKCk7CiAgICB9CiAgfSwgewogICAga2V5OiAic2F2ZVNwb3RzRnJvbVNjZW5lIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBzYXZlU3BvdHNGcm9tU2NlbmUoKSB7CiAgICAgIHZhciBzY2VuZSA9IGFyZ3VtZW50cy5sZW5ndGggPiAwICYmIGFyZ3VtZW50c1swXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzBdIDogdGhpcy5jdXJyZW50U2NlbmVQYXRoOwogICAgICB2YXIgZGF0YSA9IEpTT04uc3RyaW5naWZ5KHRoaXMudmlld2VyLmdldENvbmZpZygpWydzY2VuZXMnXVtzY2VuZV1bJ2hvdFNwb3RzJ10pOwogICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbShzY2VuZSwgZGF0YSk7CiAgICB9CiAgfSwgewogICAga2V5OiAibG9hZFNwb3RzVG9TY2VuZSIsCiAgICB2YWx1ZTogZnVuY3Rpb24gbG9hZFNwb3RzVG9TY2VuZSgpIHsKICAgICAgdmFyIF90aGlzNSA9IHRoaXM7CgogICAgICB2YXIgc2NlbmUgPSBhcmd1bWVudHMubGVuZ3RoID4gMCAmJiBhcmd1bWVudHNbMF0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1swXSA6IHRoaXMuY3VycmVudFNjZW5lUGF0aDsKICAgICAgdmFyIGRhdGEgPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbShzY2VuZSk7CgogICAgICBpZiAoZGF0YSAhPSB1bmRlZmluZWQpIHsKICAgICAgICB2YXIgc3BvdHMgPSBKU09OLnBhcnNlKGRhdGEpOwogICAgICAgIHNwb3RzLmZvckVhY2goZnVuY3Rpb24gKHNwb3QpIHsKICAgICAgICAgIGlmIChfdGhpczUudmlld2VyLmdldENvbmZpZygpLmhvdFNwb3RzW3Nwb3QuaWRdID09IHVuZGVmaW5lZCkgX3RoaXM1LmFkZEhvdFNwb3Qoc3BvdC50eXBlLCBzcG90LnBpdGNoLCBzcG90Lnlhdywgc3BvdC50ZXh0LCBzcG90LmlkLCBzcG90LnNjZW5lSWQpOwogICAgICAgIH0pOwogICAgICB9CiAgICB9CiAgfV0sIFt7CiAgICBrZXk6ICJpbmZvU3BvdENsaWNrIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBpbmZvU3BvdENsaWNrKHNwb3QpIHsKICAgICAgaWYgKHRoaXMuZWRpdGluZ01vZGUpIHsKICAgICAgICB0aGlzLmdldEhvdFNwb3RJbmZvKHNwb3QuaWQpOwogICAgICB9CiAgICB9CiAgfV0pOwoKICByZXR1cm4gQ29udHJvbGxlcjsKfSgpOwoKZXhwb3J0IHsgQ29udHJvbGxlciBhcyBkZWZhdWx0IH07"},{"version":3,"sources":["D:/Практика/Vue practice/vue-pannellum-interface/src/controller.js"],"names":["pannellum","Controller","viewerContainerId","addPannellumViewer","viewer","on","loadSpotsToScene","applyTransitionClicks","createHomeButtton","homeScene","button","document","createElement","type","id","value","style","display","onclick","loadScene","viewerController","position","top","right","getElementsByClassName","appendChild","pitch","getPitch","yaw","panoramaPath","scene","addScene","getConfig","currentScenePath","index","hotSpots","currentSpot","isEditing","hotSpotDebugIcon","spotType","text","spotId","transitionScene","length","addInfoSpot","addTransitSpot","addHotSpot","console","log","infoSpotClick","spot","editingMode","getHotSpotInfo","sceneId","homeButton","getElementById","loadPanorama","forEach","div","transitSpotClick","removeHotSpot","sceneID","undefined","spots","indexOf","data","JSON","stringify","localStorage","setItem","getItem","parse"],"mappings":"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","sourcesContent":["import pannellum from '@/pannellum-2.5.6/src/js/pannellum.js'\r\n\r\nexport default class Controller{\r\n    constructor(viewerContainerId) {\r\n        this.addPannellumViewer(viewerContainerId);\r\n    }\r\n\r\n    addPannellumViewer(viewerContainerId) {\r\n        this.viewer = pannellum.viewer(viewerContainerId, {\r\n            'default': {\r\n                'type': 'equirectangular',\r\n                'autoLoad': true,\r\n                'author': 'Akopyan Aleksandr',\r\n                'title': 'Customizable pannellum viewer',\r\n                'hotSpots': []\r\n            },\r\n            'scenes': {}\r\n        });\r\n        this.viewer.on('load', () => {\r\n            this.loadSpotsToScene();\r\n            this.applyTransitionClicks();\r\n        });\r\n\r\n        this.createHomeButtton();\r\n\r\n        this.homeScene;\r\n    }\r\n\r\n    createHomeButtton() {\r\n        let button = document.createElement('input');\r\n        button.type='button';\r\n        button.id='homeButton'\r\n        button.value = 'Home';\r\n        button.style.display = 'none';\r\n        button.onclick = () => {\r\n            this.viewer.loadScene(viewerController.homeScene);\r\n            button.style.display = 'none';\r\n        }\r\n        button.style.position = 'absolute';\r\n        button.style.top = '4px';\r\n        button.style.right = '4px';\r\n        document.getElementsByClassName('pnlm-ui')[0].appendChild(button);\r\n    }\r\n\r\n    getCenterPosition() {\r\n        return {\r\n            pitch: this.viewer.getPitch(),\r\n            yaw: this.viewer.getPitch()\r\n        }\r\n    };\r\n\r\n    addScene(panoramaPath) {\r\n        let scene = {\r\n            'panorama': panoramaPath\r\n        }\r\n        this.viewer.addScene(panoramaPath, scene);\r\n    }\r\n\r\n    loadPanorama(panoramaPath) {\r\n        if (!(panoramaPath in this.viewer.getConfig()['scenes']))\r\n            this.addScene(panoramaPath);\r\n        this.viewer.loadScene(panoramaPath);\r\n        this.currentScenePath = panoramaPath;\r\n    }\r\n\r\n    getHotSpotInfo(index) {\r\n        let hotSpots = this.viewer.getConfig()['hotSpots'];\r\n        this.currentSpot = hotSpots[index];\r\n        return this.currentSpot;\r\n    }\r\n\r\n    displayCross(isEditing) {\r\n        let hotSpotDebugIcon = document.getElementsByClassName('pnlm-sprite pnlm-hot-spot-debug-indicator')[0];\r\n        if (isEditing) {\r\n            hotSpotDebugIcon.style.display = 'block';\r\n        }\r\n        else {\r\n            hotSpotDebugIcon.style.display = 'none';\r\n        }\r\n    }\r\n\r\n    addHotSpot(spotType, pitch, yaw, text, spotId = -1, transitionScene) {\r\n        let id = spotId != -1? spotId: this.viewer.getConfig()[\"hotSpots\"].length;\r\n\r\n        spotType == 'info' ? \r\n            this.addInfoSpot(pitch, yaw, text, id): \r\n            this.addTransitSpot(pitch, yaw, text, id, transitionScene);\r\n        this.applyTransitionClicks();\r\n    }\r\n    \r\n    addInfoSpot(pitch, yaw, text, id) {\r\n        this.viewer.addHotSpot({\r\n            'pitch': pitch,\r\n            'yaw': yaw,\r\n            'type': 'info',\r\n            'text': text,\r\n            'id': id,\r\n            'clickHandlerFunc': () => {\r\n                console.log(this)\r\n                Controller.infoSpotClick(this)\r\n            }\r\n        }, this.currentScenePath);\r\n    }\r\n    \r\n    static infoSpotClick(spot) {\r\n        if (this.editingMode) {\r\n            this.getHotSpotInfo(spot.id);\r\n        }\r\n    }\r\n\r\n    addTransitSpot(pitch, yaw, text, id, transitionScene) {\r\n        this.viewer.addHotSpot({\r\n            'pitch': pitch,\r\n            'yaw': yaw,\r\n            'type': 'scene',\r\n            'text': text,\r\n            'id': id,\r\n            'sceneId': transitionScene\r\n        });\r\n    }\r\n    \r\n    transitSpotClick(spot) {\r\n        if (this.editingMode) {\r\n            this.getHotSpotInfo(spot.id);\r\n        }\r\n        else {\r\n            this.currentScenePath = spot.sceneId;\r\n            let homeButton = document.getElementById('homeButton');\r\n            homeButton.style.display = this.currentScenePath == this.homeScene ? 'none' : 'block';\r\n            this.loadPanorama(spot.sceneId);\r\n        }\r\n    }\r\n\r\n    applyTransitionClicks() {\r\n        this.viewer.getConfig().hotSpots.forEach(spot => {\r\n            if (spot.type == 'scene') {\r\n                spot.div.onclick = () => {\r\n                    this.transitSpotClick(spot);\r\n                }\r\n            }\r\n        });\r\n    }\r\n\r\n    moveHotSpot(pitch, yaw, text) {\r\n        let spot = this.currentSpot;\r\n        this.removeHotSpot();\r\n        this.addHotSpot(spot.type, pitch, yaw, text, spot.id, spot.sceneID);\r\n        this.currentSpot = undefined;\r\n        this.applyTransitionClicks();\r\n    }\r\n\r\n    removeHotSpot() {\r\n        let spots = this.viewer.getConfig()[\"hotSpots\"];\r\n        const index = spots.indexOf(this.currentSpot);\r\n        if (index > -1) {\r\n            this.viewer.removeHotSpot(this.currentSpot.id);\r\n        }\r\n        this.applyTransitionClicks();\r\n    }\r\n\r\n    saveSpotsFromScene(scene = this.currentScenePath) {\r\n        let data = JSON.stringify(this.viewer.getConfig()['scenes'][scene]['hotSpots']);\r\n        localStorage.setItem(scene, data);\r\n    }\r\n\r\n    loadSpotsToScene(scene = this.currentScenePath) {\r\n        let data = localStorage.getItem(scene);\r\n        if (data != undefined){\r\n            let spots = JSON.parse(data);\r\n            spots.forEach(spot => {\r\n                if (this.viewer.getConfig().hotSpots[spot.id] == undefined)\r\n                this.addHotSpot(spot.type, spot.pitch, spot.yaw, spot.text, spot.id, spot.sceneId);\r\n            });\r\n        }\r\n    }\r\n}"]}]}