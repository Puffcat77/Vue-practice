{"remainingRequest":"D:\\Практика\\Vue practice\\vue-pannellum-interface\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\Практика\\Vue practice\\vue-pannellum-interface\\src\\components\\EditorMenu.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\Практика\\Vue practice\\vue-pannellum-interface\\src\\components\\EditorMenu.vue","mtime":1620160948757},{"path":"D:\\Практика\\Vue practice\\vue-pannellum-interface\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\Практика\\Vue practice\\vue-pannellum-interface\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"D:\\Практика\\Vue practice\\vue-pannellum-interface\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\Практика\\Vue practice\\vue-pannellum-interface\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQgUGFub3JhbWFTZWxlY3RvciBmcm9tICdAL2NvbXBvbmVudHMvUGFub3JhbWFTZWxlY3Rvcic7DQppbXBvcnQgVXBsb2FkSW1hZ2VzIGZyb20gInZ1ZS11cGxvYWQtZHJvcC1pbWFnZXMiDQoNCmxldCBwYW5vcmFtYXMgPSBbDQogIHsNCiAgICBwYXRoOiAncGFub3JhbWFzLzIuanBnJywNCiAgICB0aXRsZTogJ9CU0L7RgdC60LAnDQogIH0sDQogIHsNCiAgICBwYXRoOiAncGFub3JhbWFzLzEuanBnJywNCiAgICB0aXRsZTogJ9Ch0LXRgNC10LTQuNC90LAg0LrQvtC80L3QsNGC0YsnDQogIH0gDQpdDQoNCmV4cG9ydCBkZWZhdWx0IHsNCiAgICBuYW1lOiAnRWRpdG9yTWVudScsDQogICAgcHJvcHM6IFsnY29udHJvbGxlciddLA0KICAgIGNvbXBvbmVudHM6IHsNCiAgICAgIFBhbm9yYW1hU2VsZWN0b3IsDQogICAgICBVcGxvYWRJbWFnZXMNCiAgICB9LA0KICAgIGRhdGEoKSB7DQogICAgICByZXR1cm4gew0KICAgICAgICBzY2VuZXM6IFtdLA0KICAgICAgICBjdXJyZW50U2NlbmU6IHVuZGVmaW5lZCwNCiAgICAgICAgdHJhbnNpdGlvblNjZW5lOiB1bmRlZmluZWQsDQogICAgICAgIHBhbm9yYW1hSXNFZGl0aW5nOiBmYWxzZSwNCiAgICAgICAgc3BvdFR5cGVzOiBbDQogICAgICAgICAgew0KICAgICAgICAgICAgdmFsdWU6ICdpbmZvJywNCiAgICAgICAgICAgIHRleHQ6ICfQmNC90YTQvtGA0LzQsNGG0LjQvtC90L3QsNGPJw0KICAgICAgICAgIH0sDQogICAgICAgICAgew0KICAgICAgICAgICAgdmFsdWU6ICdzY2VuZScsDQogICAgICAgICAgICB0ZXh0OiAn0J/QtdGA0LXRhdC+0LQnDQogICAgICAgICAgfQ0KICAgICAgICBdLA0KICAgICAgICBzcG90VHlwZTogJ2luZm8nLA0KICAgIH0NCiAgfSwNCiAgY3JlYXRlZCgpIHsNCiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHBhbm9yYW1hcy5sZW5ndGg7IGkrKykgew0KICAgICAgdGhpcy5zY2VuZXMucHVzaCh7DQogICAgICAgIGlkOiBpLA0KICAgICAgICBwYXRoOiBwYW5vcmFtYXNbaV0ucGF0aCwNCiAgICAgICAgdGl0bGU6IHBhbm9yYW1hc1tpXS50aXRsZQ0KICAgICAgfSkNCiAgICB9DQogIH0sDQogIGNvbXB1dGVkOiB7DQogICAgaXNJbnB1dERpc2FibGVkKCkgew0KICAgICAgcmV0dXJuICF0aGlzLnBhbm9yYW1hSXNFZGl0aW5nOw0KICAgIH0sDQogICAgaXNCdXR0b25EaXNhYmxlZCgpIHsNCiAgICAgIGxldCBpc1BpdGNoQWNjZXB0YWJsZSA9IA0KICAgICAgICAgcGFyc2VGbG9hdCh0aGlzLmNvbnRyb2xsZXIucGl0Y2gpIDw9IDE4MCAmJg0KICAgICAgICAgcGFyc2VGbG9hdCh0aGlzLmNvbnRyb2xsZXIucGl0Y2gpID49IC0xODA7DQogICAgICBsZXQgaXNZYXdBY2NlcHRhYmxlID0gDQogICAgICAgICBwYXJzZUZsb2F0KHRoaXMuY29udHJvbGxlci55YXcpIDw9IDkwICYmDQogICAgICAgICBwYXJzZUZsb2F0KHRoaXMuY29udHJvbGxlci55YXcpID49IC05MDsNCiAgICAgIGxldCBpc0Rlc2NyaXB0aW9uQWNjZXB0YXBsZSA9IHRoaXMuY29udHJvbGxlci50ZXh0ICE9ICcnOw0KICAgICAgbGV0IGlzVHJhbnNpdGlvblNjZW5lQ2hvc2VuID0gdGhpcy5zcG90VHlwZSA9PSAnc2NlbmUnICYmIHRoaXMudHJhbnNpdGlvblNjZW5lICE9IHVuZGVmaW5lZCB8fCB0aGlzLnNwb3RUeXBlID09ICdpbmZvJzsNCiAgICAgIHJldHVybiAhKGlzUGl0Y2hBY2NlcHRhYmxlICYmIGlzWWF3QWNjZXB0YWJsZSAmJiBpc0Rlc2NyaXB0aW9uQWNjZXB0YXBsZSAmJiBpc1RyYW5zaXRpb25TY2VuZUNob3NlbiAmJiB0aGlzLnBhbm9yYW1hSXNFZGl0aW5nKTsNCiAgICB9LA0KICAgIGlzU3BvdEVkaXRCdXR0b25EaXNhYmxlZCgpIHsNCiAgICAgIHJldHVybiAhKCF0aGlzLmlzQnV0dG9uRGlzYWJsZWQgJiYgKHRoaXMuY29udHJvbGxlci5jdXJyZW50U3BvdCAhPSB1bmRlZmluZWQpKTsNCiAgICB9LA0KICAgIGN1cnJlbnRTY2VuZVNlbGVjdGVkKCkgew0KICAgICAgcmV0dXJuIHRoaXMuY3VycmVudFNjZW5lICE9IHVuZGVmaW5lZDsNCiAgICB9LA0KICAgIGlzVHJhbnNpdFNjZW5lRGlzYWJlbGVkKCkgew0KICAgICAgcmV0dXJuICF0aGlzLnBhbm9yYW1hSXNFZGl0aW5nIHx8IHRoaXMuc3BvdFR5cGUgIT0gJ3NjZW5lJyB8fCB0aGlzLnNwb3RUeXBlID09IHVuZGVmaW5lZDsgDQogICAgfQ0KICB9LA0KICANCiAgbWV0aG9kczogew0KICAgIGN1cnJlbnRTY2VuZUNoYW5nZWQoc2NlbmUpIHsNCiAgICAgIHRoaXMuY3VycmVudFNjZW5lID0gc2NlbmU7DQogICAgICB0aGlzLmNvbnRyb2xsZXIubG9hZFNjZW5lKHRoaXMuY3VycmVudFNjZW5lKTsNCiAgICAgIHRoaXMuY29udHJvbGxlci5zZXRIb21lU2NlbmVQYXRoKHRoaXMuY3VycmVudFNjZW5lKTsNCiAgICB9LA0KICAgIGdldEN1cnJlbnRTcG90VGV4dCgpIHsNCiAgICAgIHJldHVybiB0aGlzLmNvbnRyb2xsZXIuY3VycmVudFNwb3QgPyAn0JLRi9Cx0YDQsNC90LAg0YLQvtGH0LrQsDonICsgdGhpcy5jb250cm9sbGVyLmN1cnJlbnRTcG90LnRleHQgOiB1bmRlZmluZWQ7DQogICAgfSwNCiAgICB0cmFuc2l0aW9uU2NlbmVDaGFuZ2VkKHNjZW5lKSB7DQogICAgICB0aGlzLnRyYW5zaXRpb25TY2VuZSA9IHNjZW5lOw0KICAgIH0sDQogICAgZWRpdGluZ01vZGVDaGFuZ2VkKCkgew0KICAgICAgdGhpcy5jb250cm9sbGVyLnNldEVkaXRpbmdNb2RlKHRoaXMucGFub3JhbWFJc0VkaXRpbmcpOw0KICAgICAgdGhpcy5jb250cm9sbGVyLmRpc3BsYXlDcm9zcygpOw0KICAgIH0sDQogICAgZ2V0Q2VudGVyQ2xpY2tlZCgpIHsNCiAgICAgIHRoaXMuY29udHJvbGxlci5zZXRDZW50ZXJQb3NpdGlvbigpOw0KICAgIH0sDQogICAgYWRkSG90U3BvdCgpIHsNCiAgICAgIHRoaXMuY29udHJvbGxlci5hZGRIb3RTcG90KA0KICAgICAgICB0aGlzLnNwb3RUeXBlLCB1bmRlZmluZWQsIHRoaXMudHJhbnNpdGlvblNjZW5lKTsNCiAgICB9LA0KICAgIGRlbGV0ZUhvdFNwb3QoKSB7DQogICAgICB0aGlzLmNvbnRyb2xsZXIucmVtb3ZlSG90U3BvdCgpOw0KICAgIH0sDQogICAgbW92ZUhvdFNwb3QoKSB7DQogICAgICB0aGlzLmNvbnRyb2xsZXIubW92ZUhvdFNwb3QoKTsNCiAgICB9LA0KICAgIGhhbmRsZUltYWdlcyhmaWxlcykgew0KICAgICAgZmlsZXMuZm9yRWFjaChmaWxlID0+IHsNCiAgICAgICAgaWYgKGZpbGUudHlwZSA9PT0gJ3RleHQvaHRtbCcgfHwNCiAgICAgICAgICAgIGZpbGUudHlwZSA9PT0gJ3RleHQvY3NzJyB8fA0KICAgICAgICAgICAgZmlsZS50eXBlID09PSAndGV4dC9qYXZhc2NyaXB0JykNCiAgICAgICAgcmV0dXJuOw0KDQogICAgICAgIGxldCBuYW1lID0gZmlsZS5uYW1lLnNwbGl0KCcuJylbMF07DQogICAgICAgIGxldCB1cmwgPSBVUkwuY3JlYXRlT2JqZWN0VVJMKGZpbGUpDQoNCiAgICAgICAgdGhpcy5zY2VuZXMucHVzaCh7DQogICAgICAgICAgcGF0aDogdXJsLA0KICAgICAgICAgIHRpdGxlOiBuYW1lDQogICAgICAgIH0pDQogICAgICB9KTsNCiAgICB9DQogIH0NCn0NCg=="},{"version":3,"sources":["EditorMenu.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAsDA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"EditorMenu.vue","sourceRoot":"src/components","sourcesContent":["<template>\r\n    <div id='menu'>\r\n        <fieldset>\r\n          <legend>Текущая панорама</legend>\r\n          <PanoramaSelector\r\n          :scenes='scenes'\r\n          :baseOptionText='\"Выберите текущую панораму\"'\r\n          @sceneChanged='currentSceneChanged'></PanoramaSelector>\r\n        </fieldset>\r\n        <fieldset>\r\n          <legend>Редактор панорамы</legend>\r\n            <v-checkbox v-model='panoramaIsEditing'\r\n            label='Панорама редактируется'\r\n            :disabled='!currentSceneSelected'\r\n            @change='editingModeChanged()'>\r\n            </v-checkbox>\r\n            <v-btn \r\n            :disabled='!panoramaIsEditing'\r\n            rounded\r\n            @click='getCenterClicked()'>Координаты центра</v-btn>\r\n            <v-select v-model='spotType'\r\n              :disabled='isInputDisabled'\r\n              :items='spotTypes'\r\n              item-text='text'\r\n              item-value='value'\r\n              label='Выберите тип метки'>\r\n            </v-select>\r\n            <PanoramaSelector  \r\n              :disabilityCondition='isTransitSceneDisabeled'\r\n              :scenes='scenes' \r\n              :baseOptionText='\"Выберите панораму для перехода\"'\r\n              @sceneChanged='transitionSceneChanged'></PanoramaSelector>\r\n          <v-text-field label='Вертикаль' v-model='controller.pitch' :disabled='isInputDisabled'></v-text-field>\r\n          <v-text-field label='Горизонталь' v-model='controller.yaw' :disabled='isInputDisabled'></v-text-field>\r\n          <v-text-field label='Описание' v-model='controller.text' :disabled='isInputDisabled'></v-text-field>\r\n          <v-row justify=\"center\">\r\n            <v-chip color='green' class='spot-selected' outlined v-show='controller.currentSpot != undefined'> {{ getCurrentSpotText() }}</v-chip>\r\n          </v-row>\r\n          <v-container>\r\n            <v-row justify=\"space-around\">\r\n              <v-btn :disabled='isButtonDisabled' @click='addHotSpot' rounded>Добавить метку</v-btn>\r\n              <v-btn :disabled='isSpotEditButtonDisabled' @click='deleteHotSpot' rounded>Удалить метку</v-btn>\r\n              <v-btn :disabled='isSpotEditButtonDisabled' @click='moveHotSpot' rounded>Переместить метку</v-btn>\r\n            </v-row>\r\n            <v-row  justify='center'>\r\n              <v-btn :disabled='true' id='syncronise-btn' rounded>Синхронизировать</v-btn>\r\n              <UploadImages id='pano-load-btn' @change='handleImages' uploadMsg='Нажмите, чтобы загрузить или перетяните сюда панорамы.'/>\r\n            </v-row>\r\n          </v-container>\r\n        </fieldset>\r\n      </div>\r\n</template>\r\n\r\n<script>\r\nimport PanoramaSelector from '@/components/PanoramaSelector';\r\nimport UploadImages from \"vue-upload-drop-images\"\r\n\r\nlet panoramas = [\r\n  {\r\n    path: 'panoramas/2.jpg',\r\n    title: 'Доска'\r\n  },\r\n  {\r\n    path: 'panoramas/1.jpg',\r\n    title: 'Середина комнаты'\r\n  } \r\n]\r\n\r\nexport default {\r\n    name: 'EditorMenu',\r\n    props: ['controller'],\r\n    components: {\r\n      PanoramaSelector,\r\n      UploadImages\r\n    },\r\n    data() {\r\n      return {\r\n        scenes: [],\r\n        currentScene: undefined,\r\n        transitionScene: undefined,\r\n        panoramaIsEditing: false,\r\n        spotTypes: [\r\n          {\r\n            value: 'info',\r\n            text: 'Информационная'\r\n          },\r\n          {\r\n            value: 'scene',\r\n            text: 'Переход'\r\n          }\r\n        ],\r\n        spotType: 'info',\r\n    }\r\n  },\r\n  created() {\r\n    for (let i = 0; i < panoramas.length; i++) {\r\n      this.scenes.push({\r\n        id: i,\r\n        path: panoramas[i].path,\r\n        title: panoramas[i].title\r\n      })\r\n    }\r\n  },\r\n  computed: {\r\n    isInputDisabled() {\r\n      return !this.panoramaIsEditing;\r\n    },\r\n    isButtonDisabled() {\r\n      let isPitchAcceptable = \r\n         parseFloat(this.controller.pitch) <= 180 &&\r\n         parseFloat(this.controller.pitch) >= -180;\r\n      let isYawAcceptable = \r\n         parseFloat(this.controller.yaw) <= 90 &&\r\n         parseFloat(this.controller.yaw) >= -90;\r\n      let isDescriptionAcceptaple = this.controller.text != '';\r\n      let isTransitionSceneChosen = this.spotType == 'scene' && this.transitionScene != undefined || this.spotType == 'info';\r\n      return !(isPitchAcceptable && isYawAcceptable && isDescriptionAcceptaple && isTransitionSceneChosen && this.panoramaIsEditing);\r\n    },\r\n    isSpotEditButtonDisabled() {\r\n      return !(!this.isButtonDisabled && (this.controller.currentSpot != undefined));\r\n    },\r\n    currentSceneSelected() {\r\n      return this.currentScene != undefined;\r\n    },\r\n    isTransitSceneDisabeled() {\r\n      return !this.panoramaIsEditing || this.spotType != 'scene' || this.spotType == undefined; \r\n    }\r\n  },\r\n  \r\n  methods: {\r\n    currentSceneChanged(scene) {\r\n      this.currentScene = scene;\r\n      this.controller.loadScene(this.currentScene);\r\n      this.controller.setHomeScenePath(this.currentScene);\r\n    },\r\n    getCurrentSpotText() {\r\n      return this.controller.currentSpot ? 'Выбрана точка:' + this.controller.currentSpot.text : undefined;\r\n    },\r\n    transitionSceneChanged(scene) {\r\n      this.transitionScene = scene;\r\n    },\r\n    editingModeChanged() {\r\n      this.controller.setEditingMode(this.panoramaIsEditing);\r\n      this.controller.displayCross();\r\n    },\r\n    getCenterClicked() {\r\n      this.controller.setCenterPosition();\r\n    },\r\n    addHotSpot() {\r\n      this.controller.addHotSpot(\r\n        this.spotType, undefined, this.transitionScene);\r\n    },\r\n    deleteHotSpot() {\r\n      this.controller.removeHotSpot();\r\n    },\r\n    moveHotSpot() {\r\n      this.controller.moveHotSpot();\r\n    },\r\n    handleImages(files) {\r\n      files.forEach(file => {\r\n        if (file.type === 'text/html' ||\r\n            file.type === 'text/css' ||\r\n            file.type === 'text/javascript')\r\n        return;\r\n\r\n        let name = file.name.split('.')[0];\r\n        let url = URL.createObjectURL(file)\r\n\r\n        this.scenes.push({\r\n          path: url,\r\n          title: name\r\n        })\r\n      });\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style>\r\nfieldset {\r\n  padding: 5px;\r\n}\r\n\r\n\r\n.spot-selected {\r\n  border-radius: 20%;\r\n  align-self: center;\r\n  justify-self: center;\r\n}\r\n\r\n\r\n\r\n#syncronise-btn,  #load-pano-btn {\r\n   width: 50%;\r\n   margin-top: 10px;\r\n   margin-bottom: 10px;\r\n}\r\n</style>"]}]}