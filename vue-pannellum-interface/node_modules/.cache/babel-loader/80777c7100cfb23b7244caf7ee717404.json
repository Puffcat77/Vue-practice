{"remainingRequest":"D:\\Практика\\Vue practice\\vue-pannellum-interface\\node_modules\\babel-loader\\lib\\index.js!D:\\Практика\\Vue practice\\vue-pannellum-interface\\node_modules\\eslint-loader\\index.js??ref--13-0!D:\\Практика\\Vue practice\\vue-pannellum-interface\\src\\controller.js","dependencies":[{"path":"D:\\Практика\\Vue practice\\vue-pannellum-interface\\src\\controller.js","mtime":1610618730712},{"path":"D:\\Практика\\Vue practice\\vue-pannellum-interface\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\Практика\\Vue practice\\vue-pannellum-interface\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"D:\\Практика\\Vue practice\\vue-pannellum-interface\\node_modules\\eslint-loader\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZm9yLWVhY2giOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5pbmRleC1vZiI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL3dlYi5kb20tY29sbGVjdGlvbnMuZm9yLWVhY2giOwppbXBvcnQgX2NsYXNzQ2FsbENoZWNrIGZyb20gIkQ6L1x1MDQxRlx1MDQ0MFx1MDQzMFx1MDQzQVx1MDQ0Mlx1MDQzOFx1MDQzQVx1MDQzMC9WdWUgcHJhY3RpY2UvdnVlLXBhbm5lbGx1bS1pbnRlcmZhY2Uvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2NsYXNzQ2FsbENoZWNrIjsKaW1wb3J0IF9jcmVhdGVDbGFzcyBmcm9tICJEOi9cdTA0MUZcdTA0NDBcdTA0MzBcdTA0M0FcdTA0NDJcdTA0MzhcdTA0M0FcdTA0MzAvVnVlIHByYWN0aWNlL3Z1ZS1wYW5uZWxsdW0taW50ZXJmYWNlL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9jcmVhdGVDbGFzcyI7CmltcG9ydCAncGFubmVsbHVtJzsKCnZhciBDb250cm9sbGVyID0gLyojX19QVVJFX18qL2Z1bmN0aW9uICgpIHsKICBmdW5jdGlvbiBDb250cm9sbGVyKCkgewogICAgdmFyIF90aGlzID0gdGhpczsKCiAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgQ29udHJvbGxlcik7CgogICAgdGhpcy5ob21lU2NlbmU7CiAgICB2YXIgdmlld2VyQ29uZmlnID0gewogICAgICAnZGVmYXVsdCc6IHsKICAgICAgICAndHlwZSc6ICdlcXVpcmVjdGFuZ3VsYXInLAogICAgICAgICdob3RTcG90cyc6IFtdCiAgICAgIH0sCiAgICAgICdzY2VuZXMnOiBbXQogICAgfTsKICAgIHRoaXMudmlld2VyQ29udGFpbmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7CiAgICB0aGlzLnZpZXdlckNvbnRhaW5lci5pZCA9ICd2aWV3ZXItY29udGFpbmVyJzsKICAgIHRoaXMudmlld2VyID0gd2luZG93LnBhbm5lbGx1bS52aWV3ZXIodGhpcy52aWV3ZXJDb250YWluZXIsIHZpZXdlckNvbmZpZyk7CiAgICB0aGlzLnZpZXdlci5vbignbG9hZCcsIGZ1bmN0aW9uICgpIHsKICAgICAgX3RoaXMubG9hZFNwb3RzVG9TY2VuZSgpOwoKICAgICAgX3RoaXMuYXBwbHlUcmFuc2l0aW9uQ2xpY2tzKCk7CiAgICB9KTsKICAgIHRoaXMuY3JlYXRlSG9tZUJ1dHR0b24oKTsKICB9CgogIF9jcmVhdGVDbGFzcyhDb250cm9sbGVyLCBbewogICAga2V5OiAiZ2V0Vmlld2VyIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBnZXRWaWV3ZXIoKSB7CiAgICAgIHJldHVybiB0aGlzLnZpZXdlcjsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJnZXRWaWV3ZXJDb250YWluZXIiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGdldFZpZXdlckNvbnRhaW5lcigpIHsKICAgICAgcmV0dXJuIHRoaXMudmlld2VyQ29udGFpbmVyOwogICAgfQogIH0sIHsKICAgIGtleTogImNyZWF0ZUhvbWVCdXR0dG9uIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBjcmVhdGVIb21lQnV0dHRvbigpIHsKICAgICAgdmFyIF90aGlzMiA9IHRoaXM7CgogICAgICB2YXIgYnV0dG9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaW5wdXQnKTsKICAgICAgYnV0dG9uLnR5cGUgPSAnYnV0dG9uJzsKICAgICAgYnV0dG9uLmlkID0gJ2hvbWVCdXR0b24nOwogICAgICBidXR0b24udmFsdWUgPSAnSG9tZSc7CiAgICAgIGJ1dHRvbi5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnOwoKICAgICAgYnV0dG9uLm9uY2xpY2sgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgX3RoaXMyLnZpZXdlci5sb2FkU2NlbmUoX3RoaXMyLmhvbWVTY2VuZSk7CgogICAgICAgIGJ1dHRvbi5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnOwogICAgICB9OwoKICAgICAgYnV0dG9uLnN0eWxlLnBvc2l0aW9uID0gJ2Fic29sdXRlJzsKICAgICAgYnV0dG9uLnN0eWxlLnRvcCA9ICc0cHgnOwogICAgICBidXR0b24uc3R5bGUucmlnaHQgPSAnNHB4JzsKICAgICAgdGhpcy52aWV3ZXJDb250YWluZXIuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSgncG5sbS11aScpWzBdLmFwcGVuZENoaWxkKGJ1dHRvbik7CiAgICB9CiAgfSwgewogICAga2V5OiAiZ2V0Q2VudGVyUG9zaXRpb24iLAogICAgdmFsdWU6IGZ1bmN0aW9uIGdldENlbnRlclBvc2l0aW9uKCkgewogICAgICByZXR1cm4gewogICAgICAgIHBpdGNoOiB0aGlzLnZpZXdlci5nZXRQaXRjaCgpLAogICAgICAgIHlhdzogdGhpcy52aWV3ZXIuZ2V0UGl0Y2goKQogICAgICB9OwogICAgfQogIH0sIHsKICAgIGtleTogImFkZFNjZW5lIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBhZGRTY2VuZShwYW5vcmFtYVBhdGgpIHsKICAgICAgdmFyIHNjZW5lID0gewogICAgICAgICdwYW5vcmFtYSc6IHBhbm9yYW1hUGF0aAogICAgICB9OwogICAgICB0aGlzLnZpZXdlci5hZGRTY2VuZShwYW5vcmFtYVBhdGgsIHNjZW5lKTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJsb2FkU2NlbmUiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGxvYWRTY2VuZShwYW5vcmFtYVBhdGgpIHsKICAgICAgaWYgKCEocGFub3JhbWFQYXRoIGluIHRoaXMudmlld2VyLmdldENvbmZpZygpWydzY2VuZXMnXSkpIHRoaXMuYWRkU2NlbmUocGFub3JhbWFQYXRoKTsKICAgICAgdGhpcy52aWV3ZXIubG9hZFNjZW5lKHBhbm9yYW1hUGF0aCk7CiAgICAgIHRoaXMuY3VycmVudFNjZW5lUGF0aCA9IHBhbm9yYW1hUGF0aDsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJnZXRIb3RTcG90SW5mbyIsCiAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0SG90U3BvdEluZm8oaW5kZXgpIHsKICAgICAgdmFyIGhvdFNwb3RzID0gdGhpcy52aWV3ZXIuZ2V0Q29uZmlnKClbJ2hvdFNwb3RzJ107CiAgICAgIHRoaXMuY3VycmVudFNwb3QgPSBob3RTcG90c1tpbmRleF07CiAgICAgIHJldHVybiB0aGlzLmN1cnJlbnRTcG90OwogICAgfQogIH0sIHsKICAgIGtleTogImRpc3BsYXlDcm9zcyIsCiAgICB2YWx1ZTogZnVuY3Rpb24gZGlzcGxheUNyb3NzKGlzRWRpdGluZykgewogICAgICB2YXIgaG90U3BvdERlYnVnSWNvbiA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoJ3BubG0tc3ByaXRlIHBubG0taG90LXNwb3QtZGVidWctaW5kaWNhdG9yJylbMF07CgogICAgICBpZiAoaXNFZGl0aW5nKSB7CiAgICAgICAgaG90U3BvdERlYnVnSWNvbi5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJzsKICAgICAgfSBlbHNlIHsKICAgICAgICBob3RTcG90RGVidWdJY29uLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7CiAgICAgIH0KICAgIH0KICB9LCB7CiAgICBrZXk6ICJhZGRIb3RTcG90IiwKICAgIHZhbHVlOiBmdW5jdGlvbiBhZGRIb3RTcG90KHNwb3RUeXBlLCBwaXRjaCwgeWF3LCB0ZXh0KSB7CiAgICAgIHZhciBzcG90SWQgPSBhcmd1bWVudHMubGVuZ3RoID4gNCAmJiBhcmd1bWVudHNbNF0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1s0XSA6IC0xOwogICAgICB2YXIgdHJhbnNpdGlvblNjZW5lID0gYXJndW1lbnRzLmxlbmd0aCA+IDUgPyBhcmd1bWVudHNbNV0gOiB1bmRlZmluZWQ7CiAgICAgIHZhciBpZCA9IHNwb3RJZCAhPSAtMSA/IHNwb3RJZCA6IHRoaXMudmlld2VyLmdldENvbmZpZygpWyJob3RTcG90cyJdLmxlbmd0aDsKICAgICAgc3BvdFR5cGUgPT0gJ2luZm8nID8gdGhpcy5hZGRJbmZvU3BvdChwaXRjaCwgeWF3LCB0ZXh0LCBpZCkgOiB0aGlzLmFkZFRyYW5zaXRTcG90KHBpdGNoLCB5YXcsIHRleHQsIGlkLCB0cmFuc2l0aW9uU2NlbmUpOwogICAgICB0aGlzLmFwcGx5VHJhbnNpdGlvbkNsaWNrcygpOwogICAgfQogIH0sIHsKICAgIGtleTogImFkZEluZm9TcG90IiwKICAgIHZhbHVlOiBmdW5jdGlvbiBhZGRJbmZvU3BvdChwaXRjaCwgeWF3LCB0ZXh0LCBpZCkgewogICAgICB2YXIgX3RoaXMzID0gdGhpczsKCiAgICAgIHRoaXMudmlld2VyLmFkZEhvdFNwb3QoewogICAgICAgICdwaXRjaCc6IHBpdGNoLAogICAgICAgICd5YXcnOiB5YXcsCiAgICAgICAgJ3R5cGUnOiAnaW5mbycsCiAgICAgICAgJ3RleHQnOiB0ZXh0LAogICAgICAgICdpZCc6IGlkLAogICAgICAgICdjbGlja0hhbmRsZXJGdW5jJzogZnVuY3Rpb24gY2xpY2tIYW5kbGVyRnVuYygpIHsKICAgICAgICAgIGNvbnNvbGUubG9nKF90aGlzMyk7CiAgICAgICAgICBDb250cm9sbGVyLmluZm9TcG90Q2xpY2soX3RoaXMzKTsKICAgICAgICB9CiAgICAgIH0sIHRoaXMuY3VycmVudFNjZW5lUGF0aCk7CiAgICB9CiAgfSwgewogICAga2V5OiAiYWRkVHJhbnNpdFNwb3QiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGFkZFRyYW5zaXRTcG90KHBpdGNoLCB5YXcsIHRleHQsIGlkLCB0cmFuc2l0aW9uU2NlbmUpIHsKICAgICAgdGhpcy52aWV3ZXIuYWRkSG90U3BvdCh7CiAgICAgICAgJ3BpdGNoJzogcGl0Y2gsCiAgICAgICAgJ3lhdyc6IHlhdywKICAgICAgICAndHlwZSc6ICdzY2VuZScsCiAgICAgICAgJ3RleHQnOiB0ZXh0LAogICAgICAgICdpZCc6IGlkLAogICAgICAgICdzY2VuZUlkJzogdHJhbnNpdGlvblNjZW5lCiAgICAgIH0pOwogICAgfQogIH0sIHsKICAgIGtleTogInRyYW5zaXRTcG90Q2xpY2siLAogICAgdmFsdWU6IGZ1bmN0aW9uIHRyYW5zaXRTcG90Q2xpY2soc3BvdCkgewogICAgICBpZiAodGhpcy5lZGl0aW5nTW9kZSkgewogICAgICAgIHRoaXMuZ2V0SG90U3BvdEluZm8oc3BvdC5pZCk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhpcy5jdXJyZW50U2NlbmVQYXRoID0gc3BvdC5zY2VuZUlkOwogICAgICAgIHZhciBob21lQnV0dG9uID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2hvbWVCdXR0b24nKTsKICAgICAgICBob21lQnV0dG9uLnN0eWxlLmRpc3BsYXkgPSB0aGlzLmN1cnJlbnRTY2VuZVBhdGggPT0gdGhpcy5ob21lU2NlbmUgPyAnbm9uZScgOiAnYmxvY2snOwogICAgICAgIHRoaXMubG9hZFNjZW5lKHNwb3Quc2NlbmVJZCk7CiAgICAgIH0KICAgIH0KICB9LCB7CiAgICBrZXk6ICJhcHBseVRyYW5zaXRpb25DbGlja3MiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGFwcGx5VHJhbnNpdGlvbkNsaWNrcygpIHsKICAgICAgdmFyIF90aGlzNCA9IHRoaXM7CgogICAgICB0aGlzLnZpZXdlci5nZXRDb25maWcoKS5ob3RTcG90cy5mb3JFYWNoKGZ1bmN0aW9uIChzcG90KSB7CiAgICAgICAgaWYgKHNwb3QudHlwZSA9PSAnc2NlbmUnKSB7CiAgICAgICAgICBzcG90LmRpdi5vbmNsaWNrID0gZnVuY3Rpb24gKCkgewogICAgICAgICAgICBfdGhpczQudHJhbnNpdFNwb3RDbGljayhzcG90KTsKICAgICAgICAgIH07CiAgICAgICAgfQogICAgICB9KTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJtb3ZlSG90U3BvdCIsCiAgICB2YWx1ZTogZnVuY3Rpb24gbW92ZUhvdFNwb3QocGl0Y2gsIHlhdywgdGV4dCkgewogICAgICB2YXIgc3BvdCA9IHRoaXMuY3VycmVudFNwb3Q7CiAgICAgIHRoaXMucmVtb3ZlSG90U3BvdCgpOwogICAgICB0aGlzLmFkZEhvdFNwb3Qoc3BvdC50eXBlLCBwaXRjaCwgeWF3LCB0ZXh0LCBzcG90LmlkLCBzcG90LnNjZW5lSUQpOwogICAgICB0aGlzLmN1cnJlbnRTcG90ID0gdW5kZWZpbmVkOwogICAgICB0aGlzLmFwcGx5VHJhbnNpdGlvbkNsaWNrcygpOwogICAgfQogIH0sIHsKICAgIGtleTogInJlbW92ZUhvdFNwb3QiLAogICAgdmFsdWU6IGZ1bmN0aW9uIHJlbW92ZUhvdFNwb3QoKSB7CiAgICAgIHZhciBzcG90cyA9IHRoaXMudmlld2VyLmdldENvbmZpZygpWyJob3RTcG90cyJdOwogICAgICB2YXIgaW5kZXggPSBzcG90cy5pbmRleE9mKHRoaXMuY3VycmVudFNwb3QpOwoKICAgICAgaWYgKGluZGV4ID4gLTEpIHsKICAgICAgICB0aGlzLnZpZXdlci5yZW1vdmVIb3RTcG90KHRoaXMuY3VycmVudFNwb3QuaWQpOwogICAgICB9CgogICAgICB0aGlzLmFwcGx5VHJhbnNpdGlvbkNsaWNrcygpOwogICAgfQogIH0sIHsKICAgIGtleTogInNhdmVTcG90c0Zyb21TY2VuZSIsCiAgICB2YWx1ZTogZnVuY3Rpb24gc2F2ZVNwb3RzRnJvbVNjZW5lKCkgewogICAgICB2YXIgc2NlbmUgPSBhcmd1bWVudHMubGVuZ3RoID4gMCAmJiBhcmd1bWVudHNbMF0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1swXSA6IHRoaXMuY3VycmVudFNjZW5lUGF0aDsKICAgICAgdmFyIGRhdGEgPSBKU09OLnN0cmluZ2lmeSh0aGlzLnZpZXdlci5nZXRDb25maWcoKVsnc2NlbmVzJ11bc2NlbmVdWydob3RTcG90cyddKTsKICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oc2NlbmUsIGRhdGEpOwogICAgfQogIH0sIHsKICAgIGtleTogImxvYWRTcG90c1RvU2NlbmUiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGxvYWRTcG90c1RvU2NlbmUoKSB7CiAgICAgIHZhciBfdGhpczUgPSB0aGlzOwoKICAgICAgdmFyIHNjZW5lID0gYXJndW1lbnRzLmxlbmd0aCA+IDAgJiYgYXJndW1lbnRzWzBdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMF0gOiB0aGlzLmN1cnJlbnRTY2VuZVBhdGg7CiAgICAgIHZhciBkYXRhID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oc2NlbmUpOwoKICAgICAgaWYgKGRhdGEgIT0gdW5kZWZpbmVkKSB7CiAgICAgICAgdmFyIHNwb3RzID0gSlNPTi5wYXJzZShkYXRhKTsKICAgICAgICBzcG90cy5mb3JFYWNoKGZ1bmN0aW9uIChzcG90KSB7CiAgICAgICAgICBpZiAoX3RoaXM1LnZpZXdlci5nZXRDb25maWcoKS5ob3RTcG90c1tzcG90LmlkXSA9PSB1bmRlZmluZWQpIF90aGlzNS5hZGRIb3RTcG90KHNwb3QudHlwZSwgc3BvdC5waXRjaCwgc3BvdC55YXcsIHNwb3QudGV4dCwgc3BvdC5pZCwgc3BvdC5zY2VuZUlkKTsKICAgICAgICB9KTsKICAgICAgfQogICAgfQogIH1dLCBbewogICAga2V5OiAiaW5mb1Nwb3RDbGljayIsCiAgICB2YWx1ZTogZnVuY3Rpb24gaW5mb1Nwb3RDbGljayhzcG90KSB7CiAgICAgIGlmICh0aGlzLmVkaXRpbmdNb2RlKSB7CiAgICAgICAgdGhpcy5nZXRIb3RTcG90SW5mbyhzcG90LmlkKTsKICAgICAgfQogICAgfQogIH1dKTsKCiAgcmV0dXJuIENvbnRyb2xsZXI7Cn0oKTsKCmV4cG9ydCB7IENvbnRyb2xsZXIgYXMgZGVmYXVsdCB9Ow=="},{"version":3,"sources":["D:/Практика/Vue practice/vue-pannellum-interface/src/controller.js"],"names":["Controller","homeScene","viewerConfig","viewerContainer","document","createElement","id","viewer","window","pannellum","on","loadSpotsToScene","applyTransitionClicks","createHomeButtton","button","type","value","style","display","onclick","loadScene","position","top","right","getElementsByClassName","appendChild","pitch","getPitch","yaw","panoramaPath","scene","addScene","getConfig","currentScenePath","index","hotSpots","currentSpot","isEditing","hotSpotDebugIcon","spotType","text","spotId","transitionScene","length","addInfoSpot","addTransitSpot","addHotSpot","console","log","infoSpotClick","spot","editingMode","getHotSpotInfo","sceneId","homeButton","getElementById","forEach","div","transitSpotClick","removeHotSpot","sceneID","undefined","spots","indexOf","data","JSON","stringify","localStorage","setItem","getItem","parse"],"mappings":"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","sourcesContent":["import 'pannellum';\r\n\r\nexport default class Controller{\r\n    \r\n    constructor() {\r\n        this.homeScene;\r\n\r\n        let viewerConfig = {\r\n            'default': {\r\n                'type': 'equirectangular',\r\n                'hotSpots': []\r\n            },\r\n            'scenes': []\r\n        };\r\n        this.viewerContainer = document.createElement('div');\r\n        this.viewerContainer.id = 'viewer-container';\r\n        this.viewer = window.pannellum.viewer(this.viewerContainer, viewerConfig);\r\n        this.viewer.on('load', () => {\r\n            this.loadSpotsToScene();\r\n            this.applyTransitionClicks();\r\n        });\r\n\r\n        this.createHomeButtton();\r\n    }\r\n\r\n    getViewer() {\r\n        return this.viewer;\r\n    }\r\n\r\n    getViewerContainer() {\r\n        return this.viewerContainer;\r\n    }\r\n\r\n    createHomeButtton() {\r\n        let button = document.createElement('input');\r\n        button.type='button';\r\n        button.id='homeButton'\r\n        button.value = 'Home';\r\n        button.style.display = 'none';\r\n        button.onclick = () => {\r\n            this.viewer.loadScene(this.homeScene);\r\n            button.style.display = 'none';\r\n        }\r\n        button.style.position = 'absolute';\r\n        button.style.top = '4px';\r\n        button.style.right = '4px';\r\n        this.viewerContainer.getElementsByClassName('pnlm-ui')[0].appendChild(button);\r\n    }\r\n\r\n    getCenterPosition() {\r\n        return {\r\n            pitch: this.viewer.getPitch(),\r\n            yaw: this.viewer.getPitch()\r\n        }\r\n    }\r\n\r\n    addScene(panoramaPath) {\r\n        let scene = {\r\n            'panorama': panoramaPath\r\n        }\r\n        this.viewer.addScene(panoramaPath, scene);\r\n    }\r\n\r\n    loadScene(panoramaPath) {\r\n        if (!(panoramaPath in this.viewer.getConfig()['scenes']))\r\n            this.addScene(panoramaPath);\r\n        this.viewer.loadScene(panoramaPath);\r\n        this.currentScenePath = panoramaPath;\r\n    }\r\n\r\n    getHotSpotInfo(index) {\r\n        let hotSpots = this.viewer.getConfig()['hotSpots'];\r\n        this.currentSpot = hotSpots[index];\r\n        return this.currentSpot;\r\n    }\r\n\r\n    displayCross(isEditing) {\r\n        let hotSpotDebugIcon = document.getElementsByClassName('pnlm-sprite pnlm-hot-spot-debug-indicator')[0];\r\n        if (isEditing) {\r\n            hotSpotDebugIcon.style.display = 'block';\r\n        }\r\n        else {\r\n            hotSpotDebugIcon.style.display = 'none';\r\n        }\r\n    }\r\n\r\n    addHotSpot(spotType, pitch, yaw, text, spotId = -1, transitionScene) {\r\n        let id = spotId != -1? spotId: this.viewer.getConfig()[\"hotSpots\"].length;\r\n\r\n        spotType == 'info' ? \r\n            this.addInfoSpot(pitch, yaw, text, id): \r\n            this.addTransitSpot(pitch, yaw, text, id, transitionScene);\r\n        this.applyTransitionClicks();\r\n    }\r\n    \r\n    addInfoSpot(pitch, yaw, text, id) {\r\n        this.viewer.addHotSpot({\r\n            'pitch': pitch,\r\n            'yaw': yaw,\r\n            'type': 'info',\r\n            'text': text,\r\n            'id': id,\r\n            'clickHandlerFunc': () => {\r\n                console.log(this)\r\n                Controller.infoSpotClick(this)\r\n            }\r\n        }, this.currentScenePath);\r\n    }\r\n    \r\n    static infoSpotClick(spot) {\r\n        if (this.editingMode) {\r\n            this.getHotSpotInfo(spot.id);\r\n        }\r\n    }\r\n\r\n    addTransitSpot(pitch, yaw, text, id, transitionScene) {\r\n        this.viewer.addHotSpot({\r\n            'pitch': pitch,\r\n            'yaw': yaw,\r\n            'type': 'scene',\r\n            'text': text,\r\n            'id': id,\r\n            'sceneId': transitionScene\r\n        });\r\n    }\r\n    \r\n    transitSpotClick(spot) {\r\n        if (this.editingMode) {\r\n            this.getHotSpotInfo(spot.id);\r\n        }\r\n        else {\r\n            this.currentScenePath = spot.sceneId;\r\n            let homeButton = document.getElementById('homeButton');\r\n            homeButton.style.display = this.currentScenePath == this.homeScene ? 'none' : 'block';\r\n            this.loadScene(spot.sceneId);\r\n        }\r\n    }\r\n\r\n    applyTransitionClicks() {\r\n        this.viewer.getConfig().hotSpots.forEach(spot => {\r\n            if (spot.type == 'scene') {\r\n                spot.div.onclick = () => {\r\n                    this.transitSpotClick(spot);\r\n                }\r\n            }\r\n        });\r\n    }\r\n\r\n    moveHotSpot(pitch, yaw, text) {\r\n        let spot = this.currentSpot;\r\n        this.removeHotSpot();\r\n        this.addHotSpot(spot.type, pitch, yaw, text, spot.id, spot.sceneID);\r\n        this.currentSpot = undefined;\r\n        this.applyTransitionClicks();\r\n    }\r\n\r\n    removeHotSpot() {\r\n        let spots = this.viewer.getConfig()[\"hotSpots\"];\r\n        const index = spots.indexOf(this.currentSpot);\r\n        if (index > -1) {\r\n            this.viewer.removeHotSpot(this.currentSpot.id);\r\n        }\r\n        this.applyTransitionClicks();\r\n    }\r\n\r\n    saveSpotsFromScene(scene = this.currentScenePath) {\r\n        let data = JSON.stringify(this.viewer.getConfig()['scenes'][scene]['hotSpots']);\r\n        localStorage.setItem(scene, data);\r\n    }\r\n\r\n    loadSpotsToScene(scene = this.currentScenePath) {\r\n        let data = localStorage.getItem(scene);\r\n        if (data != undefined){\r\n            let spots = JSON.parse(data);\r\n            spots.forEach(spot => {\r\n                if (this.viewer.getConfig().hotSpots[spot.id] == undefined)\r\n                this.addHotSpot(spot.type, spot.pitch, spot.yaw, spot.text, spot.id, spot.sceneId);\r\n            });\r\n        }\r\n    }\r\n}"]}]}